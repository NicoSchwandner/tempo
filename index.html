<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Speed read any article with RSVP and optimal recognition point highlighting">
    <meta name="theme-color" content="#1a1a2e">
    <title>Tempo - RSVP Speed Reader</title>
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/favicon.svg">
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="hidden">
        <div class="loading-spinner"></div>
        <p id="loading-status">Loading article...</p>
    </div>

    <header>
        <div class="header-content">
            <a href="#" class="logo" id="logo-link">
                <span class="logo-icon">▶</span>
                <span class="logo-text">Tempo</span>
            </a>
            <nav class="main-nav">
                <a href="#" class="nav-link" id="custom-text-btn">Custom Text</a>
                <a href="#" class="nav-link" id="load-url-btn">Load URL</a>
            </nav>
        </div>
        <div id="source-url" class="source-bar hidden">
            <span class="source-label">Reading:</span>
            <a id="source-link" href="#" target="_blank" rel="noopener"></a>
        </div>
    </header>

    <main>
        <!-- Error Display -->
        <div id="error-display" class="hidden">
            <h3>Could not load article</h3>
            <p id="error-message"></p>
            <button id="dismiss-error-btn">Use default text</button>
        </div>

        <!-- Word Display Area -->
        <div class="display-area">
            <!-- Single word display (shown when playing) -->
            <div id="word-display">
                <span id="word-before"></span><span id="word-orp"></span><span id="word-after"></span>
            </div>

            <!-- Context display (shown when paused) -->
            <div id="context-display" class="hidden"></div>

            <!-- Special content overlay (images, code, tables) -->
            <div id="special-content-overlay" class="hidden">
                <div id="special-content-container"></div>
                <div id="countdown-badge">5</div>
            </div>
        </div>

        <!-- Progress -->
        <div class="progress-container">
            <div class="progress-bar-bg">
                <div id="progress-bar"></div>
            </div>
            <div class="progress-info">
                <span id="progress-text">0 / 0</span>
                <span id="time-remaining"></span>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <button id="play-pause-btn" aria-label="Play">Play</button>
            <button id="start-over-btn" aria-label="Start Over">Start Over</button>

            <div class="wpm-control">
                <label for="wpm-slider">Speed:</label>
                <input type="range" id="wpm-slider" min="100" max="1000" step="25" value="250">
                <span id="wpm-value">250 WPM</span>
                <button id="reset-wpm-btn" aria-label="Reset WPM">Reset</button>
            </div>
        </div>

        <!-- Keyboard Shortcuts (hidden on mobile) -->
        <div class="shortcuts">
            <h4>Keyboard Shortcuts</h4>
            <div class="shortcuts-grid">
                <div class="shortcut">
                    <kbd>Space</kbd>
                    <span>Play / Pause</span>
                </div>
                <div class="shortcut">
                    <kbd>←</kbd>
                    <span>Previous sentence</span>
                </div>
                <div class="shortcut">
                    <kbd>→</kbd>
                    <span>Next sentence</span>
                </div>
                <div class="shortcut">
                    <kbd>↑</kbd>
                    <span>Increase WPM</span>
                </div>
                <div class="shortcut">
                    <kbd>↓</kbd>
                    <span>Decrease WPM</span>
                </div>
            </div>
        </div>

        <!-- Bookmarklet (hidden on mobile) -->
        <div class="bookmarklet-section">
            <h4>Bookmarklet</h4>
            <p>Drag this button to your bookmarks bar:</p>
            <a class="bookmarklet-link" href="javascript:window.open('https://tempo.nicos.page/#'+location.href)">Read in Tempo</a>
            <details class="bookmarklet-help">
                <summary>Installation help</summary>
                <ul>
                    <li><strong>Chrome/Edge:</strong> Show bookmarks bar (Ctrl+Shift+B), then drag the button above to it</li>
                    <li><strong>Firefox:</strong> Show bookmarks toolbar (Ctrl+Shift+B), then drag the button above to it</li>
                    <li><strong>Safari:</strong> Show Favorites bar (View → Show Favorites Bar), then drag the button above to it</li>
                    <li><strong>Manual:</strong> Right-click your bookmarks bar → Add page/bookmark → paste this as the URL:<br>
                        <code>javascript:window.open('https://tempo.nicos.page/#'+location.href)</code>
                    </li>
                </ul>
            </details>
        </div>

        <!-- Mobile Controls (hidden on desktop) -->
        <div class="mobile-controls">
            <div class="mobile-nav-row">
                <button class="mobile-btn" id="m-prev-sentence" aria-label="Previous sentence">««</button>
                <button class="mobile-btn" id="m-prev-word" aria-label="Previous word">‹</button>
                <button class="mobile-btn play-btn" id="m-play-pause" aria-label="Play">▶</button>
                <button class="mobile-btn" id="m-next-word" aria-label="Next word">›</button>
                <button class="mobile-btn" id="m-next-sentence" aria-label="Next sentence">»»</button>
            </div>
            <div class="mobile-wpm-row">
                <button class="mobile-btn" id="m-wpm-down" aria-label="Decrease speed">−</button>
                <span class="mobile-wpm-value" id="m-wpm-value">250 WPM</span>
                <button class="mobile-btn" id="m-wpm-up" aria-label="Increase speed">+</button>
            </div>
        </div>

        <!-- Text Input (hidden when URL is loaded) -->
        <div id="text-input-section" class="text-input-section">
            <h3>Custom Text</h3>
            <textarea id="text-input" placeholder="Paste your text here..."></textarea>
            <div class="text-buttons">
                <button id="submit-text-btn">Load Text</button>
                <button id="reset-text-btn">Reset to Default</button>
            </div>
        </div>
    </main>

    <script type="module" src="js/app.js"></script>
</body>
</html>
